
## hostname

`hostname`

## system info

`systeminfo`: Nos muestra mucha información del sistema, version de windows, service pack, build, hotfixes (muy importante), domain, interfaces de red...

## hotfixes detailed

`wmic qfe get Caption,Description,HotFixID,InstalledOn`

## privileges

### with meterpreter
`getprivs`
### shell

whoami /priv

## users logged on

### with metasploit module

`post/windows/gather/enum_logged_on_users`

![[Pasted image 20250221102646.png]]

### shell
`query user`

## users
`net users`
for detailed info for a user: `net user administrator`

## groups

`net localgroup` : muestra los grupos que hay en el sistema local

nota: Remote Desktop Users: los usuarios pertenecientes a este grupo pueden loggear mediante RDP.

`net localgroup administrators`: muestra los usuarios pertenecientes al grupo administrators

## network

## services and processes

### meterpreter
Podemos listar desde consola meterpreter con `ps`
Podemos buscar el PID del proceso con `pgrep explorer.exe`.
Se recomienda migrar al proceso explorer.exe porque es estable.
`migrate <PID>`
También migrar poniendo el nombre del proceso:
`migrate -N explorer.exe`

### Shell

#### Listar servicios
- `net start`
- `wmic service list brief`
- `tasklist /SVC` : Este comando lista los procesos y a que servicios están asociados esos procesos

### Schedule tasks
Listar tareas programadas, importante para privesc

- `schtasks /query /fo LIST /v`

### Enum computers
módulo: `post/windows/gather/enum_computers`: Para enumerar otros host conectados a la red del la máquina vulnerada/dominio.

## Automate Windows Local Enum

Podemos automatizar la enumeración local en búsqueda de posibles vectores para escalar privilegios usando el script de powershell JAWS. (just another windows enum script)

Repositorio: https://github.com/411Hall/JAWS
Lo clonamos y subimos el script jaws-enum.ps1 a la máquina que queremos enumerar.
Puedes leer el readme del repositorio para más información sobre cómo ejecutar.

**Commando ejecutar el script**: `CMD C:\temp> powershell.exe -ExecutionPolicy Bypass -File .\jaws-enum.ps1 -OutputFilename JAWS-Enum.txt`



### Otros comandos

#### Meterpreter commands && Metasploit modules
- Ver  monturas: `show_mount`
- Enumerar privilegios del usuario de una session: módulo: `post/windows/gather/enum_logged_on_users`
- Ver si estás en una virtual machine: `post/windows/gather/checkvm`
- Enumerar aplicaciones, y a partir de aquí se pueden buscar vulnerabilidades en cada una y escalar privilegios: módulo : `post/windows/gather/enum_applications`
- Ver los patches de windows aplicados: módulo: `post/windows/gather/enum_patches`
- Ver recursos compartidos: `post/windows/gather/enum_shares`



