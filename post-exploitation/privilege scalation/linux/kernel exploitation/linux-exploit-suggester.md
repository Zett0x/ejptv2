Una vez obtengamos una shell, por ejemplo de meterpreter, con sysinfo vemos la version del sistema, arquitectura y versión del kernel.

repo: https://github.com/The-Z-Labs/linux-exploit-suggester
Descargamos con wget la herramienta ( ver readme del repo)

1. Pasamos el script les.sh a la máquina víctima.
2. Le damos permisos de ejecución `chmod +x` 
3. Ejecutamos ./les.sh

Nos saldrá información como la versión del kernel, arquitectura, distribución y versión de la distribución;  además nos saldrá una lista de vulnerabilidades (CVE). Primero nos saldrán las vulnerabilidades con más probabilidades de éxito.
![[Pasted image 20250211183018.png]]

En este caso, nos fijaremos en el exploit dirty cow 2. En download URL podremos descargarnos el código fuente del exploit. Para compilarlo podemos o pasarlo a la maquina víctima y compilarlo ahí o compilarlo localmente y pasar el binario a la máquina víctima.

Para compilar código c usaremos `gcc`.
En este caso, en los comentarios del código fuente del exploit nos indican que para compilarlo lo hagamos así:
`gcc -pthread dirty.c -o dirty -lcrypt`
En otros casos habrá que investigar.

Lo compilamos, lo transferimos y ejecutamos en máquina víctima.

**NOTA IMPORTANTE:**
A veces dan errores como que el binario requiere de una librería que no está, en ese caso borrar el binario, pasar el código fuente e intentar compilarlo en la máquina víctima.